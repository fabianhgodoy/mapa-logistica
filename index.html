<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Pesos</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #0f0e0c;
            --surface: #1a1916;
            --card: #222018;
            --border: #35332d;
            --accent: #e8a020;
            --accent2: #f5c842;
            --text: #f0ede8;
            --muted: #8a8780;
            --success: #4caf87;
            --danger: #e05a3a;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'DM Sans', sans-serif;
            min-height: 100vh;
            padding: 2rem 1rem;
            background-image: radial-gradient(ellipse at 20% 10%, #2a220e44 0%, transparent 60%),
                radial-gradient(ellipse at 80% 80%, #1a1208 0%, transparent 50%);
        }

        header {
            max-width: 800px;
            margin: 0 auto 2.5rem;
            display: flex;
            align-items: flex-end;
            gap: 1.2rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1.5rem;
        }

        .logo-icon {
            width: 52px;
            height: 52px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.4rem;
            letter-spacing: 2px;
            color: var(--text);
            line-height: 1;
        }

        h1 span {
            color: var(--accent);
        }

        .subtitle {
            font-size: 0.82rem;
            color: var(--muted);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .main {
            max-width: 800px;
            margin: 0 auto;
        }

        /* INPUT SECTION */
        .input-card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.8rem;
            margin-bottom: 1.5rem;
        }

        .input-row {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .field {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .field-qty {
            flex: 0 0 120px;
        }

        .field-search {
            flex: 1 1 250px;
        }

        label {
            font-size: 0.72rem;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--muted);
            font-weight: 500;
        }

        input[type="number"],
        input[type="text"] {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            padding: 0.75rem 1rem;
            width: 100%;
            outline: none;
            transition: border-color 0.2s;
        }

        input:focus {
            border-color: var(--accent);
        }

        .search-wrapper {
            position: relative;
        }

        #dropdown {
            position: absolute;
            top: calc(100% + 6px);
            left: 0;
            right: 0;
            background: #2a2820;
            border: 1px solid var(--accent);
            border-radius: 10px;
            z-index: 99;
            max-height: 260px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 12px 40px #00000080;
        }

        #dropdown.open {
            display: block;
        }

        .dd-item {
            padding: 0.65rem 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
            border-bottom: 1px solid #35332d44;
            transition: background 0.15s;
        }

        .dd-item:last-child {
            border-bottom: none;
        }

        .dd-item:hover {
            background: #35321e;
        }

        .dd-name {
            font-size: 0.88rem;
        }

        .dd-cat {
            font-size: 0.68rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1px;
            background: #e8a02018;
            padding: 2px 7px;
            border-radius: 4px;
            white-space: nowrap;
        }

        .dd-unit {
            font-size: 0.72rem;
            color: var(--muted);
            white-space: nowrap;
        }

        .dd-highlight {
            color: var(--accent2);
        }

        .btn-add {
            background: var(--accent);
            color: #0f0e0c;
            border: none;
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.92rem;
            font-weight: 600;
            padding: 0.78rem 1.6rem;
            cursor: pointer;
            white-space: nowrap;
            transition: background 0.2s, transform 0.1s;
            letter-spacing: 0.5px;
        }

        .btn-add:hover {
            background: var(--accent2);
        }

        .btn-add:active {
            transform: scale(0.97);
        }

        /* RESULTS TABLE */
        .results-section {
            display: none;
        }

        .results-section.visible {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .results-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.3rem;
            letter-spacing: 2px;
            color: var(--accent);
        }

        .btn-clear {
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            border-radius: 8px;
            padding: 0.4rem 1rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 0.78rem;
            cursor: pointer;
            transition: background 0.2s;
            letter-spacing: 0.5px;
        }

        .btn-clear:hover {
            background: #e05a3a22;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card);
            border-radius: 14px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        thead tr {
            background: #35332d;
        }

        th {
            text-align: left;
            font-size: 0.68rem;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--muted);
            padding: 0.75rem 1rem;
            font-weight: 500;
        }

        td {
            padding: 0.85rem 1rem;
            font-size: 0.9rem;
            border-bottom: 1px solid #35332d44;
            vertical-align: middle;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tbody tr:hover {
            background: #2a2820;
        }

        .td-qty {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.1rem;
            color: var(--accent2);
            letter-spacing: 1px;
        }

        .td-kg {
            font-weight: 600;
            color: var(--text);
        }

        .td-ton {
            color: var(--success);
            font-size: 0.85rem;
        }

        .td-unit-label {
            font-size: 0.7rem;
            color: var(--muted);
            display: block;
        }

        .btn-remove {
            background: none;
            border: none;
            color: var(--muted);
            cursor: pointer;
            font-size: 1.1rem;
            padding: 2px 6px;
            border-radius: 5px;
            transition: color 0.2s, background 0.2s;
        }

        .btn-remove:hover {
            color: var(--danger);
            background: #e05a3a18;
        }

        /* TOTAL BAR */
        .total-bar {
            background: var(--accent);
            border-radius: 12px;
            padding: 1.2rem 1.6rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .total-label {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            letter-spacing: 2px;
            color: #0f0e0c;
        }

        .total-vals {
            display: flex;
            gap: 2rem;
            align-items: baseline;
            flex-wrap: wrap;
        }

        .total-kg {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.2rem;
            color: #0f0e0c;
            letter-spacing: 2px;
            line-height: 1;
        }

        .total-ton {
            font-size: 1rem;
            color: #0f0e0c;
            font-weight: 600;
            opacity: 0.75;
        }

        /* No results */
        .no-results {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--muted);
            font-size: 0.9rem;
        }

        .error-msg {
            color: var(--danger);
            font-size: 0.8rem;
            margin-top: 0.4rem;
            display: none;
        }

        .error-msg.show {
            display: block;
        }

        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        @media (max-width: 500px) {
            h1 {
                font-size: 1.8rem;
            }

            .field-qty {
                flex: 0 0 90px;
            }

            th:nth-child(3),
            td:nth-child(3) {
                display: none;
            }
        }
    </style>
</head>

<body>

    <header>
        <div class="logo-icon">⚖️</div>
        <div>
            <h1>FLORIDA<span>NORTE</span></h1>
            <p class="subtitle">Calculadora de materiales de construcción</p>
        </div>
    </header>

    <div class="main">
        <div class="input-card">
            <div class="input-row">
                <div class="field field-qty">
                    <label>Cantidad</label>
                    <input type="number" id="qty" placeholder="160" min="0" step="any">
                </div>
                <div class="field field-search">
                    <label>Producto</label>
                    <div class="search-wrapper">
                        <input type="text" id="search" placeholder="Ej: avellaneda, hueco 18..." autocomplete="off">
                        <div id="dropdown"></div>
                    </div>
                    <span class="error-msg" id="error">Por favor elegí un producto de la lista.</span>
                </div>
                <button class="btn-add" onclick="addItem()">+ Agregar</button>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <span class="results-title">DETALLE DE CARGA</span>
                <button class="btn-clear" onclick="clearAll()">✕ Limpiar todo</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cant.</th>
                        <th>Unidad</th>
                        <th>Kg/un</th>
                        <th>Total Kg</th>
                        <th>Toneladas</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
            <div class="total-bar">
                <span class="total-label">PESO TOTAL</span>
                <div class="total-vals">
                    <span class="total-kg" id="totalKg">0 KG</span>
                    <span class="total-ton" id="totalTon">0 ton</span>
                </div>
            </div>
        </div>

        <div class="no-results" id="emptyState">
            Agregá productos para calcular el peso total de tu carga.
        </div>
    </div>

    <script>
        const PRODUCTS = [
            // CEMENTOS
            { name: "Holcim", cat: "Cemento", unit: "bolsa", kgPerUnit: 25 },
            { name: "Avellaneda", cat: "Cemento", unit: "bolsa", kgPerUnit: 25 },
            // CALES
            { name: "Cal Hidrat / Cal Común", cat: "Cal", unit: "bolsa", kgPerUnit: 25 },
            { name: "Cal Milagro", cat: "Cal", unit: "bolsa", kgPerUnit: 25 },
            // CEMENTO DE ALBAÑILERÍA
            { name: "Hidralit / Plasticor", cat: "Cem. Albañilería", unit: "bolsa", kgPerUnit: 20 },
            { name: "Maestro (Holcim)", cat: "Cem. Albañilería", unit: "bolsa", kgPerUnit: 25 },
            // YESOS
            { name: "Yeso Tuyango Tradicional 30kg", cat: "Yeso", unit: "bolsa", kgPerUnit: 30 },
            { name: "Yeso Tuyango Proyectable SG 30kg", cat: "Yeso", unit: "bolsa", kgPerUnit: 30 },
            { name: "Yeso Tuyango AP 25kg", cat: "Yeso", unit: "bolsa", kgPerUnit: 25 },
            { name: "Yeso Alpress Proyectable 35kg", cat: "Yeso", unit: "bolsa", kgPerUnit: 35 },
            { name: "Yeso Corral 40kg", cat: "Yeso", unit: "bolsa", kgPerUnit: 40 },
            // ADHESIVOS
            { name: "Perfecto x25 (todos)", cat: "Adhesivo", unit: "bolsa", kgPerUnit: 25 },
            { name: "Klaukol x25 (todos)", cat: "Adhesivo", unit: "bolsa", kgPerUnit: 25 },
            { name: "Weber x25 (todos)", cat: "Adhesivo", unit: "bolsa", kgPerUnit: 25 },
            { name: "Holcim Tector x25", cat: "Adhesivo", unit: "bolsa", kgPerUnit: 25 },
            // MORTEROS
            { name: "Fino a la Cal x25", cat: "Mortero", unit: "bolsa", kgPerUnit: 25 },
            { name: "Promex x30", cat: "Mortero", unit: "bolsa", kgPerUnit: 30 },
            { name: "Mortero Retak x30", cat: "Mortero", unit: "bolsa", kgPerUnit: 30 },
            { name: "Base Coat Weber x30", cat: "Mortero", unit: "bolsa", kgPerUnit: 30 },
            // ÁRIDOS
            { name: "Arena / Piedra Partida 6/20 / Cascote", cat: "Árido", unit: "m³", kgPerUnit: 1350 },
            { name: "Arena / Piedra - Bolsón", cat: "Árido", unit: "bolsón", kgPerUnit: 1000 },
            { name: "Arena / Piedra - Bolsa", cat: "Árido", unit: "bolsa", kgPerUnit: 30 },
            // LADRILLOS
            { name: "Ladrillo Común", cat: "Ladrillo", unit: "un", kgPerUnit: 1.65 },
            { name: "Ladrillo Chacabuco / Córdoba", cat: "Ladrillo", unit: "un", kgPerUnit: 2.00 },
            { name: "Ladrillo Hueco 8", cat: "Ladrillo", unit: "un", kgPerUnit: 3.50 },
            { name: "Ladrillo Hueco 12", cat: "Ladrillo", unit: "un", kgPerUnit: 4.60 },
            { name: "Ladrillo Hueco 18", cat: "Ladrillo", unit: "un", kgPerUnit: 6.40 },
            { name: "Portante 12", cat: "Ladrillo", unit: "un", kgPerUnit: 5.60 },
            { name: "Portante 18", cat: "Ladrillo", unit: "un", kgPerUnit: 7.50 },
            { name: "Retak 7.5", cat: "Ladrillo", unit: "un", kgPerUnit: 6.25 },
            { name: "Retak 10", cat: "Ladrillo", unit: "un", kgPerUnit: 8.33 },
            { name: "Retak 12.5", cat: "Ladrillo", unit: "un", kgPerUnit: 10.42 },
            { name: "Retak 15", cat: "Ladrillo", unit: "un", kgPerUnit: 12.50 },
            { name: "Retak 17.5", cat: "Ladrillo", unit: "un", kgPerUnit: 13.89 },
            { name: "Retak 20", cat: "Ladrillo", unit: "un", kgPerUnit: 17.86 },
            { name: "Ladrillo Cemento 13", cat: "Ladrillo", unit: "un", kgPerUnit: 13.00 },
            { name: "Ladrillo Cemento 19", cat: "Ladrillo", unit: "un", kgPerUnit: 19.00 },
            // HIERROS - VARILLAS
            { name: "Varilla 6 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 2.66 },
            { name: "Varilla 8 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 4.74 },
            { name: "Varilla 10 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 7.40 },
            { name: "Varilla 12 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 10.66 },
            { name: "Varilla 16 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 18.96 },
            { name: "Varilla 20 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 29.64 },
            { name: "Varilla 25 (barra 12mts)", cat: "Hierro", unit: "barra", kgPerUnit: 46.20 },
            { name: "KG ADN", cat: "Hierro", unit: "kg", kgPerUnit: 1 },
            // MALLAS
            { name: "Malla 4 15x25 (5x2) Cerr.", cat: "Malla", unit: "un", kgPerUnit: 8.86 },
            { name: "Malla 4 15x15 (5x2) Cerr.", cat: "Malla", unit: "un", kgPerUnit: 11.30 },
            { name: "Malla 6 15x15 Q131 Mini (3x2.4)", cat: "Malla", unit: "un", kgPerUnit: 14.80 },
            { name: "Malla 6 15x15 Q131 (6x2.4)", cat: "Malla", unit: "un", kgPerUnit: 29.60 },
            { name: "Malla 8 15x15 Q257 (6x2.4)", cat: "Malla", unit: "un", kgPerUnit: 58.00 },
            { name: "Malla 6 Q188 15x15 (6x2.4)", cat: "Malla", unit: "un", kgPerUnit: 42.62 },
            { name: "Malla 8 Q335 (6x2.4)", cat: "Malla", unit: "un", kgPerUnit: 75.76 },
            { name: "Malla 10 Q524 (6x2.4)", cat: "Malla", unit: "un", kgPerUnit: 118.38 },
            // VIGUETAS
            { name: "Vigas (por metro lineal)", cat: "Vigueta", unit: "ml", kgPerUnit: 15 },
            // EPS
            { name: "EPS 10x42x100", cat: "Bloque EPS", unit: "un", kgPerUnit: 0.5 },
            { name: "EPS 12x42x100", cat: "Bloque EPS", unit: "un", kgPerUnit: 0.5 },
            { name: "EPS 16x42x100", cat: "Bloque EPS", unit: "un", kgPerUnit: 0.5 },
        ];

        let items = [];
        let selectedProduct = null;

        const searchInput = document.getElementById('search');
        const dropdown = document.getElementById('dropdown');
        const qtyInput = document.getElementById('qty');
        const errorEl = document.getElementById('error');

        function normalize(str) {
            return str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        }

        function highlight(text, query) {
            if (!query) return text;
            const norm = normalize(query);
            const normText = normalize(text);
            const idx = normText.indexOf(norm);
            if (idx === -1) return text;
            return text.slice(0, idx) + '<span class="dd-highlight">' + text.slice(idx, idx + query.length) + '</span>' + text.slice(idx + query.length);
        }

        function filterProducts(query) {
            if (!query) return PRODUCTS;
            const q = normalize(query);
            return PRODUCTS.filter(p => normalize(p.name).includes(q) || normalize(p.cat).includes(q));
        }

        function renderDropdown(query) {
            const results = filterProducts(query);
            if (!results.length) {
                dropdown.innerHTML = '<div class="dd-item" style="color:var(--muted);cursor:default">Sin resultados</div>';
            } else {
                dropdown.innerHTML = results.map((p, i) => `
      <div class="dd-item" data-idx="${PRODUCTS.indexOf(p)}">
        <span class="dd-name">${highlight(p.name, query)}</span>
        <span class="dd-cat">${p.cat}</span>
        <span class="dd-unit">${p.kgPerUnit} kg/${p.unit}</span>
      </div>
    `).join('');
                dropdown.querySelectorAll('.dd-item[data-idx]').forEach(el => {
                    el.addEventListener('mousedown', (e) => {
                        e.preventDefault();
                        const idx = parseInt(el.dataset.idx);
                        selectProduct(PRODUCTS[idx]);
                    });
                });
            }
            dropdown.classList.add('open');
        }

        function selectProduct(p) {
            selectedProduct = p;
            searchInput.value = p.name;
            dropdown.classList.remove('open');
            errorEl.classList.remove('show');
        }

        searchInput.addEventListener('input', () => {
            selectedProduct = null;
            renderDropdown(searchInput.value.trim());
        });

        searchInput.addEventListener('focus', () => {
            renderDropdown(searchInput.value.trim());
        });

        searchInput.addEventListener('blur', () => {
            setTimeout(() => dropdown.classList.remove('open'), 150);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') addItem();
        });

        function addItem() {
            const qty = parseFloat(qtyInput.value);
            if (!selectedProduct) {
                errorEl.classList.add('show');
                searchInput.focus();
                return;
            }
            if (!qty || qty <= 0) {
                qtyInput.focus();
                return;
            }
            errorEl.classList.remove('show');
            const totalKg = qty * selectedProduct.kgPerUnit;
            items.push({ ...selectedProduct, qty, totalKg, id: Date.now() });
            qtyInput.value = '';
            searchInput.value = '';
            selectedProduct = null;
            renderTable();
        }

        function removeItem(id) {
            items = items.filter(i => i.id !== id);
            renderTable();
        }

        function clearAll() {
            items = [];
            renderTable();
        }

        function fmt(n) {
            return n.toLocaleString('es-AR', { maximumFractionDigits: 2 });
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            const section = document.getElementById('resultsSection');
            const empty = document.getElementById('emptyState');

            if (!items.length) {
                section.classList.remove('visible');
                empty.style.display = 'block';
                return;
            }

            section.classList.add('visible');
            empty.style.display = 'none';

            tbody.innerHTML = items.map(item => `
    <tr>
      <td>
        ${item.name}
        <span class="td-unit-label">${item.cat}</span>
      </td>
      <td class="td-qty">${fmt(item.qty)}</td>
      <td><span class="td-unit-label">${item.unit}</span></td>
      <td>${fmt(item.kgPerUnit)} kg</td>
      <td class="td-kg">${fmt(item.totalKg)} kg</td>
      <td class="td-ton">${(item.totalKg / 1000).toLocaleString('es-AR', { minimumFractionDigits: 3, maximumFractionDigits: 3 })} t</td>
      <td><button class="btn-remove" onclick="removeItem(${item.id})">✕</button></td>
    </tr>
  `).join('');

            const totalKg = items.reduce((s, i) => s + i.totalKg, 0);
            document.getElementById('totalKg').textContent = fmt(totalKg) + ' KG';
            document.getElementById('totalTon').textContent = (totalKg / 1000).toLocaleString('es-AR', { minimumFractionDigits: 3, maximumFractionDigits: 3 }) + ' toneladas';
        }

        renderTable();
    </script>
</body>

</html>